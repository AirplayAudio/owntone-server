import{C as g}from"./ContentWithHero.js";import{C as y}from"./CoverArtwork.js";import{G as u}from"./GroupByList.js";import{L as x}from"./ListTracks.js";import{_ as P,M as D,e as i,r as n,o as z,c as B,d as l,w as c,a as s,t as r,b as k}from"./index.js";import{M}from"./ModalDialogAlbum.js";import"./spotify-web-api.js";const p={load(t){return Promise.all([i.library_album(t.params.id),i.library_podcast_episodes(t.params.id)])},set(t,o){t.album=o[0].data,t.tracks=new u(o[1].data.tracks)}},R={name:"PagePodcast",components:{ContentWithHero:g,CoverArtwork:y,ListTracks:x,ModalDialog:D,ModalDialogAlbum:M},beforeRouteEnter(t,o,_){p.load(t).then(m=>{_(e=>p.set(e,m))})},beforeRouteUpdate(t,o,_){const m=this;p.load(t).then(e=>{p.set(m,e),_()})},data(){return{album:{},rss_playlist_to_remove:{},show_details_modal:!1,show_remove_podcast_modal:!1,tracks:new u}},computed:{new_tracks(){return this.tracks.items.filter(t=>t.play_count===0).length}},methods:{open_remove_podcast_dialog(){i.library_track_playlists(this.tracks.items[0].id).then(({data:t})=>{[this.rss_playlist_to_remove]=t.items.filter(o=>o.type==="rss"),this.show_remove_podcast_modal=!0,this.show_details_modal=!1})},play(){i.player_play_uri(this.album.uri,!1)},reload_tracks(){i.library_podcast_episodes(this.album.id).then(({data:t})=>{this.tracks=new u(t.tracks)})},remove_podcast(){this.show_remove_podcast_modal=!1,i.library_playlist_delete(this.rss_playlist_to_remove.id).then(()=>{this.$router.replace({name:"podcasts"})})}}},L=["textContent"],N=s("h2",{class:"subtitle is-6"},"Â ",-1),V={class:"buttons fd-is-centered-mobile mt-5"},A=["textContent"],E=["textContent"],G=["textContent"],T={class:"is-size-7"},j=["textContent"],H=["textContent"];function O(t,o,_,m,e,a){const h=n("mdicon"),b=n("cover-artwork"),w=n("list-tracks"),f=n("modal-dialog-album"),v=n("modal-dialog"),C=n("content-with-hero");return z(),B("div",null,[l(C,null,{"heading-left":c(()=>[s("h1",{class:"title is-5",textContent:r(e.album.name)},null,8,L),N,s("div",V,[s("a",{class:"button is-small is-dark is-rounded",onClick:o[0]||(o[0]=(...d)=>a.play&&a.play(...d))},[l(h,{class:"icon",name:"play",size:"16"}),s("span",{textContent:r(t.$t("page.podcast.play"))},null,8,A)]),s("a",{class:"button is-small is-light is-rounded",onClick:o[1]||(o[1]=d=>e.show_details_modal=!0)},[l(h,{class:"icon",name:"dots-horizontal",size:"16"})])])]),"heading-right":c(()=>[l(b,{artwork_url:e.album.artwork_url,artist:e.album.artist,album:e.album.name,class:"is-clickable fd-has-shadow fd-cover fd-cover-medium-image",onClick:o[2]||(o[2]=d=>e.show_details_modal=!0)},null,8,["artwork_url","artist","album"])]),content:c(()=>[s("p",{class:"heading is-7 has-text-centered-mobile mt-5",textContent:r(t.$t("page.podcast.track-count",{count:e.album.track_count}))},null,8,E),l(w,{tracks:e.tracks,show_progress:!0,onPlayCountChanged:a.reload_tracks},null,8,["tracks","onPlayCountChanged"]),l(f,{show:e.show_details_modal,album:e.album,media_kind:"podcast",new_tracks:a.new_tracks,onClose:o[3]||(o[3]=d=>e.show_details_modal=!1),onPlayCountChanged:a.reload_tracks,onRemovePodcast:a.open_remove_podcast_dialog},null,8,["show","album","new_tracks","onPlayCountChanged","onRemovePodcast"]),l(v,{show:e.show_remove_podcast_modal,title:t.$t("page.podcast.remove-podcast"),delete_action:t.$t("page.podcast.remove"),onClose:o[4]||(o[4]=d=>e.show_remove_podcast_modal=!1),onDelete:a.remove_podcast},{"modal-content":c(()=>[s("p",{textContent:r(t.$t("page.podcast.remove-info-1"))},null,8,G),s("p",T,[k(" ("),s("span",{textContent:r(t.$t("page.podcast.remove-info-2"))},null,8,j),s("b",{textContent:r(e.rss_playlist_to_remove.name)},null,8,H),k(") ")])]),_:1},8,["show","title","delete_action","onDelete"])]),_:1})])}const K=P(R,[["render",O]]);export{K as default};
