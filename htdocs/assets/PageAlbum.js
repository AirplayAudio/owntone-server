import{C}from"./ContentWithHero.js";import{C as g}from"./CoverArtwork.js";import{G as p,b as x,n as y}from"./GroupByList.js";import{L as v}from"./ListTracks.js";import{M as A}from"./ModalDialogAlbum.js";import{_ as B,e as _,r as n,o as L,c as z,d as l,w as d,a as e,t as u}from"./index.js";import"./spotify-web-api.js";const c={load(s){return Promise.all([_.library_album(s.params.id),_.library_album_tracks(s.params.id)])},set(s,o){s.album=o[0].data,s.tracks=new p(o[1].data),s.tracks.group(x("disc_number")),s.tracks.indexList<=1&&s.tracks.group(y())}},M={name:"PageAlbum",components:{ContentWithHero:C,CoverArtwork:g,ListTracks:v,ModalDialogAlbum:A},beforeRouteEnter(s,o,r){c.load(s).then(i=>{r(t=>c.set(t,i))})},beforeRouteUpdate(s,o,r){const i=this;c.load(s).then(t=>{c.set(i,t),r()})},data(){return{album:{},show_details_modal:!1,tracks:new p}},methods:{open_artist(){this.show_details_modal=!1,this.$router.push({name:"music-artist",params:{id:this.album.artist_id}})},play(){_.player_play_uri(this.album.uri,!0)}}},P=["textContent"],D={class:"subtitle is-6 has-text-link"},E=["textContent"],G={class:"buttons fd-is-centered-mobile mt-5"},N=["textContent"],R=["textContent"];function V(s,o,r,i,t,m){const b=n("mdicon"),h=n("cover-artwork"),k=n("list-tracks"),f=n("modal-dialog-album"),w=n("content-with-hero");return L(),z("div",null,[l(w,null,{"heading-left":d(()=>[e("h1",{class:"title is-5",textContent:u(t.album.name)},null,8,P),e("h2",D,[e("a",{class:"has-text-link",onClick:o[0]||(o[0]=(...a)=>m.open_artist&&m.open_artist(...a)),textContent:u(t.album.artist)},null,8,E)]),e("div",G,[e("a",{class:"button is-small is-dark is-rounded",onClick:o[1]||(o[1]=(...a)=>m.play&&m.play(...a))},[l(b,{class:"icon",name:"shuffle",size:"16"}),e("span",{textContent:u(s.$t("page.album.shuffle"))},null,8,N)]),e("a",{class:"button is-small is-light is-rounded",onClick:o[2]||(o[2]=a=>t.show_details_modal=!0)},[l(b,{class:"icon",name:"dots-horizontal",size:"16"})])])]),"heading-right":d(()=>[l(h,{artwork_url:t.album.artwork_url,artist:t.album.artist,album:t.album.name,class:"is-clickable fd-has-shadow fd-cover fd-cover-medium-image",onClick:o[3]||(o[3]=a=>t.show_details_modal=!0)},null,8,["artwork_url","artist","album"])]),content:d(()=>[e("p",{class:"heading is-7 has-text-centered-mobile mt-5",textContent:u(s.$t("page.album.track-count",{count:t.album.track_count}))},null,8,R),l(k,{tracks:t.tracks,uris:t.album.uri},null,8,["tracks","uris"]),l(f,{show:t.show_details_modal,album:t.album,onClose:o[4]||(o[4]=a=>t.show_details_modal=!1)},null,8,["show","album"])]),_:1})])}const q=B(M,[["render",V]]);export{q as default};
