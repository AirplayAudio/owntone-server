import{C}from"./CoverArtwork.js";import{_ as b,M as y,e as c,r,o as i,c as a,F as h,f as x,a as s,t as l,d as m,k as p,h as $,g as B,w as D,b as u,B as M}from"./index.js";import{M as A}from"./ModalDialogAlbum.js";const L={name:"ListAlbums",components:{CoverArtwork:C,ModalDialog:y,ModalDialogAlbum:A},props:["albums","media_kind","hide_group_title"],emits:["play-count-changed","podcast-deleted"],data(){return{show_details_modal:!1,selected_album:{},show_remove_podcast_modal:!1,rss_playlist_to_remove:{}}},computed:{is_visible_artwork(){return this.$store.getters.settings_option("webinterface","show_cover_artwork_in_album_lists").value},media_kind_resolved(){return this.media_kind?this.media_kind:this.selected_album.media_kind}},methods:{open_album(t){this.selected_album=t,this.media_kind_resolved==="podcast"?this.$router.push({name:"podcast",params:{id:t.id}}):this.media_kind_resolved==="audiobook"?this.$router.push({name:"audiobooks-album",params:{id:t.id}}):this.$router.push({name:"music-album",params:{id:t.id}})},open_dialog(t){this.selected_album=t,this.show_details_modal=!0},open_remove_podcast_dialog(){c.library_album_tracks(this.selected_album.id,{limit:1}).then(({data:t})=>{c.library_track_playlists(t.items[0].id).then(({data:o})=>{this.rss_playlist_to_remove=o.items.filter(_=>_.type==="rss")[0],this.show_remove_podcast_modal=!0,this.show_details_modal=!1})})},play_count_changed(){this.$emit("play-count-changed")},remove_podcast(){this.show_remove_podcast_modal=!1,c.library_playlist_delete(this.rss_playlist_to_remove.id).then(()=>{this.$emit("podcast-deleted")})}}},N={key:0,class:"mt-6 mb-5 py-2"},V=["id","textContent"],I=["onClick"],z={key:0,class:"media-left"},F={class:"media-content is-clickable is-clipped"},K=["textContent"],P=["textContent"],T=["textContent"],E={class:"media-right"},R=["onClick"],S=["textContent"],j={class:"is-size-7"},q=["textContent"],G=["textContent"];function H(t,o,_,J,n,d){const v=r("cover-artwork"),k=r("mdicon"),g=r("modal-dialog-album"),w=r("modal-dialog");return i(),a(h,null,[(i(!0),a(h,null,x(_.albums,e=>(i(),a(h,{key:e.itemId},[!e.isItem&&!_.hide_group_title?(i(),a("div",N,[s("span",{id:"index_"+e.groupKey,class:"tag is-info is-light is-small has-text-weight-bold",textContent:l(e.groupKey)},null,8,V)])):e.isItem?(i(),a("div",{key:1,class:"media is-align-items-center",onClick:f=>d.open_album(e.item)},[d.is_visible_artwork?(i(),a("div",z,[m(v,{artwork_url:e.item.artwork_url,artist:e.item.artist,album:e.item.name,class:"is-clickable fd-has-shadow fd-cover fd-cover-small-image"},null,8,["artwork_url","artist","album"])])):p("",!0),s("div",F,[s("div",null,[s("h1",{class:"title is-6",textContent:l(e.item.name)},null,8,K),s("h2",{class:"subtitle is-7 has-text-grey has-text-weight-bold",textContent:l(e.item.artist)},null,8,P),e.item.date_released&&e.item.media_kind==="music"?(i(),a("h2",{key:0,class:"subtitle is-7 has-text-grey",textContent:l(t.$filters.date(e.item.date_released))},null,8,T)):p("",!0)])]),s("div",E,[s("a",{onClick:$(f=>d.open_dialog(e.item),["prevent","stop"])},[m(k,{class:"icon has-text-dark",name:"dots-vertical",size:"16"})],8,R)])],8,I)):p("",!0)],64))),128)),(i(),B(M,{to:"#app"},[m(g,{show:n.show_details_modal,album:n.selected_album,media_kind:_.media_kind,onRemovePodcast:o[0]||(o[0]=e=>d.open_remove_podcast_dialog()),onPlayCountChanged:o[1]||(o[1]=e=>d.play_count_changed()),onClose:o[2]||(o[2]=e=>n.show_details_modal=!1)},null,8,["show","album","media_kind"]),m(w,{show:n.show_remove_podcast_modal,title:t.$t("page.podcast.remove-podcast"),delete_action:t.$t("page.podcast.remove"),onClose:o[3]||(o[3]=e=>n.show_remove_podcast_modal=!1),onDelete:d.remove_podcast},{"modal-content":D(()=>[s("p",{textContent:l(t.$t("list.albums.info-1"))},null,8,S),s("p",j,[u(" ("),s("span",{textContent:l(t.$t("list.albums.info-2"))},null,8,q),s("b",{textContent:l(n.rss_playlist_to_remove.name)},null,8,G),u(") ")])]),_:1},8,["show","title","delete_action","onDelete"])]))],64)}const W=b(L,[["render",H]]);export{W as L};
